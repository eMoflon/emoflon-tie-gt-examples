import "http://www.eclipse.org/emf/2002/Ecore"
import "platform:/resource/test2/model/Test2.ecore"


pattern matchPartition(boxId:EInt) {
	partition : Partition
	b : Box{
		.boxSize>=partition.size
		.thisBoxId==param::boxId
		.boxSize!=0
		.boxWidthcm==1.1
		//.isAssignable==true
		//.type==enum::BIG_BOX
		.name=="testbox"
		-partition->partition
	}
}

rule addPartition{
	b: Box{
		++ -partition->p2
	}
	++p2:Partition
} when noPartitionBound

rule removePartition(boxId:EInt){
	--p3:Partition
	b:Box{
		.thisBoxId==param::boxId
		-- -partition->p3
	}
}

condition noPartitionBound = forbid matchNoPartition

pattern matchNoPartition{
	b:Box{
		-partition->p
	}
	p:Partition
}

